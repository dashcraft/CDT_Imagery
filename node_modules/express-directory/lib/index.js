var StaticFolder, finalhandler, serveStatic;
serveStatic = require('serve-static');
finalhandler = require('finalhandler');

StaticFolder = function() {
  return this;
};

StaticFolder.prototype.folder = function(expressInstance, prefix, folderPath) {
  expressInstance.use(prefix, serveStatic(folderPath));
  return this;
};

StaticFolder.prototype.secure = function(expressInstance, prefix, folderPath, callback) {
  expressInstance.use(prefix, function(req, res, next) {
    callback(req, res, function() {
      var done;
      done = finalhandler(req, res);
      serveStatic(folderPath)(req, res, done);
    });
  });
  return this;
};

module.exports = new StaticFolder;
